<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-800">
    <!-- Navbar -->
    <header
      class="bg-gradient-to-r from-indigo-500 from-10% via-sky-500 via-30% to-emerald-500 to-90% text-white shadow-sm sticky top-0 z-50"
    >
      <nav
        class="container mx-auto p-4 md:px-8 flex justify-between items-center"
      >
        <!-- Logo -->
        <div class="flex items-center space-x-2">
          <img
            src="/logo-icon-surveystream.png"
            alt="SurveyStream Logo"
            class="w-16"
          />
          <span class="text-xl font-bold">Admin Panel</span>
        </div>

        <div>
          <ul class="flex items-center justify-center">
            <li class="border-r border-gray-300 mr-2 pr-2">
              <a href="/">Marketing</a>
            </li>
            <li class="border-r border-gray-300 mr-2 pr-2">
              <a href="/account">User Account</a>
            </li>
            <li class="border-r border-gray-300 mr-2 pr-2">
              <a href="/enterprise">SA</a>
            </li>
            <li>
              <a href="/admin">Admin</a>
            </li>
          </ul>
        </div>

        <!-- Profile -->
        <div
          class="relative w-10 h-10 overflow-hidden bg-slate-600 rounded-full"
        >
          <svg
            class="absolute w-12 h-12 text-slate-400 -left-1"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </div>
      </nav>
    </header>

    <div class="container mx-auto p-4 md:p-8">
      <!-- Main Content Header -->
      <div class="mt-8 mb-8">
        <h1 class="text-3xl font-bold text-slate-900">System Overview</h1>
        <p class="text-slate-500">
          Monitor key metrics, aggregators, and takers at a glance.
        </p>
      </div>

      <!-- KPI Cards -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
          <p class="text-sm font-medium text-slate-500">
            Total Surveys Created
          </p>
          <p
            id="kpi-surveys-created"
            class="text-3xl font-bold mt-2 text-indigo-600"
          >
            0
          </p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
          <p class="text-sm font-medium text-slate-500">
            Total Surveys Completed
          </p>
          <p
            id="kpi-surveys-completed"
            class="text-3xl font-bold mt-2 text-green-600"
          >
            0
          </p>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
          <p class="text-sm font-medium text-slate-500">Total Earnings Paid</p>
          <p
            id="kpi-earnings-paid"
            class="text-3xl font-bold mt-2 text-blue-600"
          >
            $0.00
          </p>
        </div>
      </div>

      <!-- Charts Section -->
      <section
        class="mb-10 bg-white p-6 rounded-xl shadow-sm border border-slate-100"
      >
        <h3 class="text-xl font-bold mb-4">
          Survey Activity: Created vs. Completed
        </h3>
        <!-- Chart container with a fixed aspect ratio to prevent resize errors -->
        <div>
          <canvas id="surveyActivityChart" class="w-full h-full"></canvas>
        </div>
      </section>

      <!-- Survey Aggregators Section -->
      <section id="aggregators-section" class="mb-10">
        <h2 class="text-2xl font-bold mb-1">Survey Aggregators</h2>
        <p class="text-slate-500 mb-6">
          A list of all survey creators and their contributions to the platform.
        </p>
        <div
          class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 overflow-x-auto"
        >
          <table class="w-full text-left whitespace-nowrap">
            <thead>
              <tr
                class="text-slate-500 uppercase text-sm font-semibold border-b border-slate-100"
              >
                <th class="py-3 px-4">Name</th>
                <th class="py-3 px-4">Surveys Created</th>
                <th class="py-3 px-4">Total Reward Value</th>
                <th class="py-3 px-4">Actions</th>
              </tr>
            </thead>
            <tbody
              id="aggregators-list"
              class="divide-y divide-slate-100"
            ></tbody>
          </table>
        </div>
      </section>

      <!-- Survey Takers Section -->
      <section id="takers-section" class="mb-10">
        <h2 class="text-2xl font-bold mb-1">Survey Takers</h2>
        <p class="text-slate-500 mb-6">
          A list of all survey takers and their activity on the platform.
        </p>
        <div
          class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 overflow-x-auto"
        >
          <table class="w-full text-left whitespace-nowrap">
            <thead>
              <tr
                class="text-slate-500 uppercase text-sm font-semibold border-b border-slate-100"
              >
                <th class="py-3 px-4">Name</th>
                <th class="py-3 px-4">Surveys Completed</th>
                <th class="py-3 px-4">Total Earnings</th>
                <th class="py-3 px-4">Actions</th>
              </tr>
            </thead>
            <tbody id="takers-list" class="divide-y divide-slate-100"></tbody>
          </table>
        </div>
      </section>
    </div>

    <script>
      const mockData = {
        aggregators: [
          {
            id: 1,
            name: 'Tech Insight Corp.',
            surveysCreated: 15,
            totalRewardValue: 45.75
          },
          {
            id: 2,
            name: 'Market Data Co.',
            surveysCreated: 22,
            totalRewardValue: 68.2
          },
          {
            id: 3,
            name: 'Consumer Pulse Solutions',
            surveysCreated: 10,
            totalRewardValue: 30.5
          }
        ],
        takers: [
          {
            id: 101,
            name: 'Jane Doe',
            surveysCompleted: 48,
            totalEarnings: 55.6
          },
          {
            id: 102,
            name: 'John Smith',
            surveysCompleted: 35,
            totalEarnings: 42.15
          },
          {
            id: 103,
            name: 'Alice Williams',
            surveysCompleted: 60,
            totalEarnings: 75.0
          }
        ],
        dailyMetrics: [
          { date: '2024-05-28', created: 5, completed: 8 },
          { date: '2024-05-29', created: 7, completed: 12 },
          { date: '2024-05-30', created: 4, completed: 6 },
          { date: '2024-05-31', created: 9, completed: 15 },
          { date: '2024-06-01', created: 6, completed: 10 }
        ]
      };

      function renderAggregators(aggregators) {
        const list = document.getElementById('aggregators-list');
        list.innerHTML = aggregators
          .map(
            (agg) => `
                <tr class="hover:bg-slate-50">
                    <td class="py-3 px-4">${agg.name}</td>
                    <td class="py-3 px-4">${agg.surveysCreated}</td>
                    <td class="py-3 px-4">$${agg.totalRewardValue.toFixed(
                      2
                    )}</td>
                    <td class="py-3 px-4">
                        <button class="bg-indigo-500 text-white text-sm font-semibold py-1 px-3 rounded-lg hover:bg-indigo-600 transition-colors duration-200">View</button>
                    </td>
                </tr>
            `
          )
          .join('');
      }

      function renderTakers(takers) {
        const list = document.getElementById('takers-list');
        list.innerHTML = takers
          .map(
            (taker) => `
                <tr class="hover:bg-slate-50">
                    <td class="py-3 px-4">${taker.name}</td>
                    <td class="py-3 px-4">${taker.surveysCompleted}</td>
                    <td class="py-3 px-4">$${taker.totalEarnings.toFixed(
                      2
                    )}</td>
                    <td class="py-3 px-4">
                        <button class="bg-indigo-500 text-white text-sm font-semibold py-1 px-3 rounded-lg hover:bg-indigo-600 transition-colors duration-200">View</button>
                    </td>
                </tr>
            `
          )
          .join('');
      }

      function updateKPIs(data) {
        const totalSurveysCreated = data.aggregators.reduce(
          (sum, agg) => sum + agg.surveysCreated,
          0
        );
        const totalSurveysCompleted = data.takers.reduce(
          (sum, taker) => sum + taker.surveysCompleted,
          0
        );
        const totalEarningsPaid = data.takers.reduce(
          (sum, taker) => sum + taker.totalEarnings,
          0
        );

        document.getElementById('kpi-surveys-created').textContent =
          totalSurveysCreated;
        document.getElementById('kpi-surveys-completed').textContent =
          totalSurveysCompleted;
        document.getElementById(
          'kpi-earnings-paid'
        ).textContent = `$${totalEarningsPaid.toFixed(2)}`;
      }

      function renderSurveyActivityChart(dailyMetrics) {
        const labels = dailyMetrics.map((d) => d.date);
        const createdData = dailyMetrics.map((d) => d.created);
        const completedData = dailyMetrics.map((d) => d.completed);

        const ctx = document
          .getElementById('surveyActivityChart')
          .getContext('2d');
        new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [
              {
                label: 'Surveys Created',
                data: createdData,
                borderColor: 'rgb(59, 130, 246)',
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                tension: 0.3,
                fill: false
              },
              {
                label: 'Surveys Completed',
                data: completedData,
                borderColor: 'rgb(34, 197, 94)',
                backgroundColor: 'rgba(34, 197, 94, 0.2)',
                tension: 0.3,
                fill: false
              }
            ]
          },
          options: {
            responsive: false,
            maintainAspectRatio: true,
            scales: {
              y: {
                beginAtZero: true,
                grid: { color: 'rgba(203, 213, 225, 0.4)' },
                title: { display: true, text: 'Number of Surveys' }
              },
              x: {
                grid: { display: false }
              }
            },
            plugins: {
              tooltip: {
                mode: 'index',
                intersect: false
              }
            }
          }
        });
      }

      document.addEventListener('DOMContentLoaded', () => {
        updateKPIs(mockData);
        renderAggregators(mockData.aggregators);
        renderTakers(mockData.takers);
        renderSurveyActivityChart(mockData.dailyMetrics);
      });
    </script>
  </body>
</html>
